(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{379:function(t,s,n){"use strict";n.r(s);var a=n(42),e=Object(a.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"docker-compose"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#docker-compose"}},[t._v("#")]),t._v(" Docker Compose")]),t._v(" "),n("p",[t._v("參考 Selenium 在 "),n("a",{attrs:{href:"https://hub.docker.com/u/selenium",target:"_blank",rel:"noopener noreferrer"}},[t._v("DockerHub"),n("OutboundLink")],1),t._v(" 的 image 說明，與 "),n("a",{attrs:{href:"https://mileschou.github.io/selenium-docker-example/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Selenium 的範例"),n("OutboundLink")],1),t._v("，實作如下的 Docker Compose file：")]),t._v(" "),n("div",{staticClass:"language-yaml extra-class"},[n("pre",{pre:!0,attrs:{class:"language-yaml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("version")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"3"')]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("services")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("tester")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("build")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" .\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("working_dir")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /source\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("volumes")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ."),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/source\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("depends_on")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" chrome\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" firefox\n\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("hub")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("image")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" selenium/hub"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("3.141.59"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("iron\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("container_name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" hub\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ports")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"4444:4444"')]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("chrome")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("image")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" selenium/node"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("chrome"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("debug"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("3.141.59"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("iron\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("volumes")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" /dev/shm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/dev/shm\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("depends_on")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" hub\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("environment")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" HUB_HOST=hub\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" HUB_PORT=4444\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ports")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"5900:5900"')]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("firefox")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("image")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" selenium/node"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("firefox"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("debug"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("3.141.59"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("iron\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("volumes")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" /dev/shm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/dev/shm\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("depends_on")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" hub\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("environment")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" HUB_HOST=hub\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" HUB_PORT=4444\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ports")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"5901:5900"')]),t._v("\n")])])]),n("p",[t._v("先啟動依賴的容器：")]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker-compose")]),t._v(" up -d hub chrome firefox\n")])])]),n("p",[t._v("接著就能執行測試：")]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker-compose")]),t._v(" run --rm --no-deps tester\n")])])]),n("p",[t._v("這兩個指令，"),n("code",[t._v("-d")]),t._v(" 和 "),n("code",[t._v("--rm")]),t._v(" 與 "),n("code",[t._v("docker run")]),t._v(" 的參數意義相同，"),n("code",[t._v("--no-deps")]),t._v(" 則是不額外啟動 "),n("code",[t._v("depends_on")]),t._v(" 的 container。")]),t._v(" "),n("h2",{attrs:{id:"references"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#references"}},[t._v("#")]),t._v(" References")]),t._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://mileschou.github.io/selenium-docker-example/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Selenium Docker Example"),n("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=e.exports}}]);