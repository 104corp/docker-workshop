(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{366:function(e,t,n){"use strict";n.r(t);var r=n(42),a=Object(r.a)({},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("h1",{attrs:{id:"port-forwarding"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#port-forwarding"}},[e._v("#")]),e._v(" Port forwarding")]),e._v(" "),n("p",[e._v("練習此題，可以了解：")]),e._v(" "),n("ul",[n("li",[e._v("Docker Container 隔離特性")]),e._v(" "),n("li",[e._v("如何透過 port 存取 Container 提供的服務")])]),e._v(" "),n("h2",{attrs:{id:"指令練習"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#指令練習"}},[e._v("#")]),e._v(" 指令練習")]),e._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 執行多次，port 都不會打架")]),e._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" container run -d nginx:alpine\n"),n("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" container run -d nginx:alpine\n"),n("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" container run -d nginx:alpine\n"),n("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" container run -d nginx:alpine\n"),n("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" container run -d nginx:alpine\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" container run -d --name my-web -p "),n("span",{pre:!0,attrs:{class:"token number"}},[e._v("8080")]),e._v(":80 nginx:alpine\n"),n("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" container stop my-web\n"),n("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" container "),n("span",{pre:!0,attrs:{class:"token function"}},[e._v("rm")]),e._v(" -vf my-web\n")])])]),n("h2",{attrs:{id:"指令說明"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#指令說明"}},[e._v("#")]),e._v(" 指令說明")]),e._v(" "),n("h3",{attrs:{id:"docker-container-run"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#docker-container-run"}},[e._v("#")]),e._v(" "),n("code",[e._v("docker container run")])]),e._v(" "),n("ul",[n("li",[n("code",[e._v("-d|--detach")]),e._v(" 背景執行 container。")]),e._v(" "),n("li",[n("code",[e._v("-p|--publish")]),e._v(" 把 container 的 port 公開到 host 上，格式為 "),n("code",[e._v("[IP]:[HOST_PORT]:[CONTAINER_PORT]")])])]),e._v(" "),n("blockquote",[n("p",[e._v("已經跑在前景的 container 可以用 Ctrl + P、Ctrl + Q 組合鍵 detach；接著可以再用 "),n("code",[e._v("docker container attach")]),e._v(" 讓它回到前景")])]),e._v(" "),n("h3",{attrs:{id:"docker-container-stop"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#docker-container-stop"}},[e._v("#")]),e._v(" "),n("code",[e._v("docker container stop")])]),e._v(" "),n("p",[e._v("停止指定的 container，用法：")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("docker container stop [OPTIONS] CONTAINER [CONTAINER...]\n")])])]),n("p",[e._v("此指令會送出 "),n("code",[e._v("SIGTERM")]),e._v(" 給 container 的主程序，當 timeout（預設 10，可使用 "),n("code",[e._v("-t|--time")]),e._v(" 參數調整）後會再送出 "),n("code",[e._v("SIGKILL")]),e._v("。")]),e._v(" "),n("blockquote",[n("p",[e._v("類似地，"),n("code",[e._v("docker container pause")]),e._v(" 是送 "),n("code",[e._v("SIGSTOP")]),e._v("；"),n("code",[e._v("docker container kill")]),e._v(" 則是預設直接送 "),n("code",[e._v("SIGKILL")]),e._v("。")])]),e._v(" "),n("h3",{attrs:{id:"docker-container-rm"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#docker-container-rm"}},[e._v("#")]),e._v(" "),n("code",[e._v("docker container rm")])]),e._v(" "),n("p",[e._v("移除指定的 container，用法：")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("docker container rm [OPTIONS] CONTAINER [CONTAINER...]\n")])])]),n("blockquote",[n("p",[e._v("可移除多個 container")])]),e._v(" "),n("ul",[n("li",[n("code",[e._v("-f|--force")]),e._v(" 如果是執行中的 container，會強制移除（使用 SIGKILL）")]),e._v(" "),n("li",[n("code",[e._v("-v|--volumes")]),e._v(" 移除分配給 container 的 volume")])]),e._v(" "),n("h2",{attrs:{id:"總結"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#總結"}},[e._v("#")]),e._v(" 總結")]),e._v(" "),n("p",[e._v("了解 Container 的隔離機制是非常重要的。某種程度上，因為它具備了隔離機制，所以我們才有辦法把它當作「輕量的 VM 」來使用。")]),e._v(" "),n("h2",{attrs:{id:"references"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#references"}},[e._v("#")]),e._v(" References")]),e._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://hub.docker.com/_/nginx",target:"_blank",rel:"noopener noreferrer"}},[e._v("Nginx image"),n("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=a.exports}}]);